
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Virt Block</title>
	<meta name="author" content="Fam Zheng">

	
	<meta name="description" content="To sum up part of the work in GSoC 2011, this post talks about some facts of
real-world VMDK format, which is not quite well documented in the &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Virt Block" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Virt Block</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:famz.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:famz.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/08/19/comments-on-vmdk-formats/">
		
			Comments on VMDK Formats</a>
	</h2>
	<div class="entry-content">
		<p>To sum up part of the work in GSoC 2011, this post talks about some facts of
real-world VMDK format, which is not quite well documented in the official
Specification <a href="http://www.vmware.com/app/vmdk/?src=vmdk">Virtual Disk Format
1.1</a> (version may be changed from the
time this was written).</p>


		
		<a href="/blog/2011/08/19/comments-on-vmdk-formats/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-08-19T01:00:00+08:00" pubdate data-updated="true">Aug 19<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/08/19/comments-on-vmdk-formats//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/07/21/bug-track-vsphere-4.x-export-to-ovf-image/">
		
			Bug Track: vSphere 4.x &#8216;Export to OVF&#8217; Image</a>
	</h2>
	<div class="entry-content">
		<h2>Bug report:</h2>

<p>from <a href="https://bugzilla.redhat.com/show_bug.cgi?id=548723">https://bugzilla.redhat.com/show_bug.cgi?id=548723</a></p>


		
		<a href="/blog/2011/07/21/bug-track-vsphere-4.x-export-to-ovf-image/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-21T01:00:00+08:00" pubdate data-updated="true">Jul 21<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/07/21/bug-track-vsphere-4.x-export-to-ovf-image//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/07/21/bug-track-issue-with-block-vmdk/">
		
			Bug Track: Issue With Block/vmdk</a>
	</h2>
	<div class="entry-content">
		<p>Bug report:</p>


		
		<a href="/blog/2011/07/21/bug-track-issue-with-block-vmdk/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-21T00:00:00+08:00" pubdate data-updated="true">Jul 21<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/07/21/bug-track-issue-with-block-vmdk//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/07/03/differences-between-vmdk3-and-the-specification/">
		
			Differences Between VMDK3 and the Specification &#8216;ESX Server Sparse Extent&#8217;</a>
	</h2>
	<div class="entry-content">
		<p>VMDK3 is a format which QEMU has implemented r/w support, it is the only image
format that VMware Workstation 3 produces, and was updated to what we call
VMDK4 since Workstation 4.0. The older format is no longer valid in latest
VMware Workstation versions, so I have to install Workstation 3 to get an image
sample.</p>


		
		<a href="/blog/2011/07/03/differences-between-vmdk3-and-the-specification/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-03T01:00:00+08:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/07/03/differences-between-vmdk3-and-the-specification//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/07/03/bug-track-qemu-img-convert-fails-to-convert/">
		
			Bug Track: Qemu-img Convert Fails to Convert, Generates a 512byte File Output</a>
	</h2>
	<div class="entry-content">
		<p>Bug report:</p>

<p>Link: <a href="https://bugs.launchpad.net/qemu/+bug/784977">https://bugs.launchpad.net/qemu/+bug/784977</a></p>

<p>Reported by Andy Brook on 2011-05-19</p>


		
		<a href="/blog/2011/07/03/bug-track-qemu-img-convert-fails-to-convert/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-03T01:00:00+08:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/07/03/bug-track-qemu-img-convert-fails-to-convert//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/06/29/writing-stream-optimized-vmdk/">
		
			Writing Stream Optimized VMDK</a>
	</h2>
	<div class="entry-content">
		<p>Stream optimized VMDK image allocates minimized space for a compressed cluster,
which means if there is high compress ratio, a cluster possibly only takes one
physical sector in the file. Which makes overwriting hard, especially when new
data needs more sectors than previously allocated.</p>


		
		<a href="/blog/2011/06/29/writing-stream-optimized-vmdk/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-29T01:00:00+08:00" pubdate data-updated="true">Jun 29<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/06/29/writing-stream-optimized-vmdk//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/06/15/testing-vmware-mount/">
		
			Testing Vmware-mount</a>
	</h2>
	<div class="entry-content">
		<p>VMware VDDK contains a tool ‘vmware-mount’ that is capable of mounting a
partition in VMDK disk. For example if we have a disk image named Minit.vmdk in
which a Linux Mint is installed. We can examine the partitions with
vmware-mount command by:</p>

<pre><code>sudo vmware-mount -p Mint.vmdk
</code></pre>

<p>The output is:</p>


		
		<a href="/blog/2011/06/15/testing-vmware-mount/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-15T01:00:00+08:00" pubdate data-updated="true">Jun 15<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/06/15/testing-vmware-mount//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/06/15/more-about-vmdk-descriptor-file/">
		
			More About Vmdk Descriptor File</a>
	</h2>
	<div class="entry-content">
		<p>The VMware behavior on opening VMDK disk is:</p>

<p>Read the descriptor file, if it has magic bytes (“VMDK” or “COWD”) in first 4
bytes, it’s recognized as monolithic sparse disk, otherwise try to parse the
file as a text file.</p>


		
		<a href="/blog/2011/06/15/more-about-vmdk-descriptor-file/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-15T01:00:00+08:00" pubdate data-updated="true">Jun 15<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/06/15/more-about-vmdk-descriptor-file//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/06/10/status-update-summary-of-the-week/">
		
			Status Update: Summary of the Week</a>
	</h2>
	<div class="entry-content">
		<p>Work done this week:</p>


		
		<a href="/blog/2011/06/10/status-update-summary-of-the-week/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-10T01:00:00+08:00" pubdate data-updated="true">Jun 10<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/06/10/status-update-summary-of-the-week//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/06/08/installing-vmware-esx-3.5-on-qemu/">
		
			Installing VMware ESX 3.5 on QEMU</a>
	</h2>
	<div class="entry-content">
		<ol>
<li>Download “ESX Server 3.5.iso”.</li>
<li><p>Create VM disk:</p>

<p><code>qemu-img create ESX.qcow2 -f qcow2 16G</code></p></li>
<li><p>Start VM to install from CD (enable KVM to speed up, and give a e1000 nic to
make sure ESX can support it, otherwise the installation will abort):</p>

<p><code>qemu -enable-kvm ESX.qcow2 -cdrom "ESX Server 3.5.iso" -boot d -net nic,model=e1000</code></p></li>
<li><p>Select proper options in the wizard, wait for a while until the server’s
installed.</p></li>
<li>Reboot and the system will be into the login prompt, log in root with the
password you set.</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-08T01:00:00+08:00" pubdate data-updated="true">Jun 8<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>gsoc</a>


</div>
	
		<div class="comments"><a href="/blog/2011/06/08/installing-vmware-esx-3.5-on-qemu//index.html#disqus_thread">Comments</a></div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Fam Zheng

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'Fam';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>